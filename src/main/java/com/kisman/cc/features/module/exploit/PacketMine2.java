package com.kisman.cc.features.module.exploit;

import com.kisman.cc.features.module.Category;
import com.kisman.cc.features.module.Module;
import net.minecraft.block.state.IBlockState;
import net.minecraft.enchantment.EnchantmentHelper;
import net.minecraft.init.Enchantments;
import net.minecraft.init.Items;
import net.minecraft.item.ItemStack;
import net.minecraft.util.math.BlockPos;

@Deprecated
public class PacketMine2 extends Module {

    public PacketMine2(){
        super("PacketMine V2", Category.EXPLOIT);
    }

    private static final class BlockBreakProgress {

        private final BlockPos pos;

        private int bestSlot;

        private float progress;

        public BlockBreakProgress(BlockPos pos){
            this.pos = pos;
            this.progress = 0f;
        }

        public BlockPos getBlockPos(){
            return pos;
        }

        public float getProgress(){
            return progress;
        }

        public void updateProgress(){

        }

        private void updateBestStack(){
            IBlockState state = mc.world.getBlockState(pos);
            double bestSpeed = 0;
            int bestSlot = -1;
            for (int i = 0; i < 9; i++) {
                ItemStack stack = mc.player.inventory.getStackInSlot(i);
                if (stack.isEmpty() || stack.getItem() == Items.AIR) continue;
                float speed = stack.getDestroySpeed(state);
                int eff;
                if (speed > 1) {
                    speed += ((eff = EnchantmentHelper.getEnchantmentLevel(Enchantments.EFFICIENCY, stack)) > 0 ? (Math.pow(eff, 2) + 1) : 0);
                    if (speed > bestSpeed) {
                        bestSpeed = speed;
                        bestSlot = i;
                    }
                }
            }
            this.bestSlot = bestSlot < 0 ? mc.player.inventory.currentItem : bestSlot;
        }
    }
}
